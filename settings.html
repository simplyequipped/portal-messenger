<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Portal Messenger</title>
		<link rel="stylesheet" type="text/css" href="static/styles.css">
		<link rel="stylesheet" type="text/css" href="static/media.css">
		<link rel="stylesheet" type="text/css" href="static/dark.css">
		<link rel="icon" type="image/x-icon" href="static/icons/double_arrow.svg">
		<script src="static/common.js"></script>
		<script src="static/jquery.min.js"></script>
		<script src="static/socket.io.min.js"></script>
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
    </head>
    <body>
	    <div class="header">
		    PORTAL MESSENGER
		    <!--
            <a href="/portalmessenger/index.html"><span class="icon icon-list">&nbsp;</span></a>
            -->
		    <a href="javascript:history.back()"><span class="icon icon-back">&nbsp;</span></a>
	    </div>
		<div class="details">
			<div class="details-name">Settings</div>
		</div>
		<div class="viewport">
			<div class="content">
				<br/>
                
			    <form id="settings-form" action="/settings" method="post">

				<div class="setting-row">
                    <label for="modem">Modem</label>
				    <select type="text" id="modem" name="modem">
					    <option value="js8call" selected >JS8Call</option>
                    </select>
                </div>

				<div class="setting-row">
                    <label for="callsign">Callsign</label>
                    <input type="text" id="callsign" name="callsign" value="">
                </div>

				<div class="setting-row">
                    <label for="freq">Frequency (Hz)</label>
                    <input type="text" id="freq" name="freq" value="7078000">
                </div>

				<div class="setting-row">
                    <label for="grid">Grid Square</label>
                    <input type="text" id="grid" name="grid" value="">
                </div>

				<div class="setting-row">
                    <label for="speed">Modem Speed</label>
				    <select type="text" id="speed" name="speed">
					    <option value="slow">Slow</option>
					    <option value="normal" selected >Normal</option>
					    <option value="fast">Fast</option>
					    <option value="turbo">Turbo</option>
                    </select>
                </div>

				<div class="setting-row">
                    <label for="aging">Aging (minutes)</label>
                    <input type="text" id="aging" name="aging" value="15">
                </div>

			    </form>

		    </div>
		</div>
		<div class="footer">
			<span class="icon icon-power power-on">&nbsp;</span>
			<form><button type="submit" id="save-button">Save Settings</button></form>
		</div>

    </body>
	<script>
		//var socket = io.connect('http://' + document.domain + ':' + location.port);
	
		//socket.on('get-settings', function( settings ) {
		//	Object.keys(settings).forEach(function( setting ) {
		//		updateLocalSetting('setting-' + setting, settings[setting]);
		//	});
		//
		//	handleLocalSettings();
		//});

		//socket.on('power-on', function( settings ) {
		//	$('.icon-power').removeClass('power-off');
		//	$('.icon-power').removeClass('power-pending');
		//	$('.icon-power').addClass('power-on');
		//});

		//socket.on('power-off', function( settings ) {
		//	$('.icon-power').removeClass('power-on');
		//	$('.icon-power').removeClass('power-pending');
		//	$('.icon-power').addClass('power-off');
		//});

		//socket.on('power-pending', function( settings ) {
		//	$('.icon-power').removeClass('power-on');
		//	$('.icon-power').removeClass('power-off');
		//	$('.icon-power').addClass('power-pending');
		//});

        $(window).on('load', function(){
            $('#save-button').click(function() {
                event.preventDefault();
                //$('#settings-form').submit()
            });

            //$('.icon-power').click(function() {
			//	if ( $('.icon-power').hasClass('power-on') ) {
			//		//socket.emit('power-off');
			//		$('.icon-power').removeClass('power-on');
			//		$('.icon-power').addClass('power-pending');
			//	}
			//	else if ( $('.icon-power').hasClass('power-off') ) {
			//		//socket.emit('power-on');	
			//		$('.icon-power').removeClass('power-off');
			//		$('.icon-power').addClass('power-pending');
			//
			//		setTimeout(function () {
			//			if ( $('.icon-power').hasClass('power-pending') ) {
			//				$('.icon-power').removeClass('power-pending');
			//				$('.icon-power').addClass('power-off');
			//			}
			//		}, 60 * 1000);
			//	}
			//
			//	// close the current tab
			//	//var win = window.open('about:blank', '_self');
			//	//win.close();
            //});
        });

	</script>
</html>
